<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calendrier Nithalien</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{--bg:#0b0b10;--text:#f1f1f1;--accent:#00bcd4;--card:#181825}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,sans-serif;background:radial-gradient(circle at top left,#10101a,#050508);color:var(--text);display:flex;align-items:center;justify-content:center;height:100vh}
.container{background:var(--card);padding:2rem 3rem;border-radius:20px;box-shadow:0 0 25px rgba(0,188,212,.15);width:min(800px,90%);text-align:center}
h1{margin:0;color:var(--accent)}
.date{font-size:1.8rem;margin:1rem 0;font-weight:600}
.sub{color:#ccc;margin-bottom:1rem}
.controls{display:flex;gap:1rem;justify-content:center;align-items:center}
.month-display{color:var(--accent);font-size:1.2rem}
button{background:var(--accent);border:none;padding:.6rem 1.2rem;border-radius:10px;cursor:pointer}
.calendar{margin-top:1rem;display:grid;grid-template-columns:repeat(7,1fr);gap:.4rem}
.day{background:rgba(255,255,255,.05);padding:.6rem;border-radius:8px}
.day.today{background:var(--accent);color:#000;font-weight:600}
</style>
</head>
<body>
<div class="container">
<h1>Calendrier Nithalien</h1>
<div class="date" id="nithalien-date"></div>
<div class="sub" id="current-time"></div>
<div class="controls">
<button id="prev">◀</button>
<div class="month-display" id="viewed"></div>
<button id="next">▶</button>
</div>
<div class="calendar" id="calendar"></div>
</div>
<script>
const monthsNames=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre","Trŕcembre"]
const monthsNormal=[30,29,30,29,30,29,30,29,30,29,30,29]
const embolicYears=[3,6,8,11,14,17,19]
const DAY_MS=86400000

function isEmbolic(y){if(y<=0)return false;const c=y%19||19;return embolicYears.includes(c)}
function monthsOf(y){const m=[...monthsNormal];if(isEmbolic(y))m.push(30);return m}

let ref
try{ref=JSON.parse(localStorage.getItem("nithalienRef"))}catch(e){ref=null}

if(!ref||!ref.nith||ref.nith.month>=monthsOf(ref.nith.year).length){
  const anchor=new Date()
  anchor.setHours(0,0,0,0)
  ref={greg:anchor.getTime(),nith:{year:0,month:11,day:14}}
  localStorage.setItem("nithalienRef",JSON.stringify(ref))
}

function addDays(n,days){let year=n.year,month=n.month,day=n.day;while(days>0){const m=monthsOf(year);day++;if(day>m[month]){day=1;month++;if(month>=m.length){month=0;year++}}days--}return{year,month,day}}

const today=new Date();today.setHours(0,0,0,0)
const delta=Math.max(0,Math.floor((today.getTime()-ref.greg)/DAY_MS))
const current=addDays(ref.nith,delta)

let cy=current.year,cm=current.month,cd=current.day
let vy=cy,vm=cm

function renderHeader(){document.getElementById("nithalien-date").textContent=`${String(cd).padStart(2,"0")} ${monthsNames[cm]} ${String(cy).padStart(4,"0")}`}
function renderViewed(){document.getElementById("viewed").textContent=`${monthsNames[vm]} ${String(vy).padStart(4,"0")}`}
function renderCal(){const cal=document.getElementById("calendar");cal.innerHTML="";const len=monthsOf(vy)[vm];for(let d=1;d<=len;d++){const div=document.createElement("div");div.className="day";div.textContent=d;if(vy===cy&&vm===cm&&d===cd)div.classList.add("today");cal.appendChild(div)}}

setInterval(()=>{document.getElementById("current-time").textContent=new Date().toLocaleTimeString("fr-FR")},1000)

document.getElementById("prev").onclick=()=>{vm--;if(vm<0){vy--;vm=monthsOf(vy).length-1}renderViewed();renderCal()}
document.getElementById("next").onclick=()=>{vm++;if(vm>=monthsOf(vy).length){vm=0;vy++}renderViewed();renderCal()}

renderHeader();renderViewed();renderCal()
</script>
</body>
</html>
